<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - Interview Preparation Portal</title>
    <link rel="stylesheet" href="../css/login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <!-- Header with Navigation -->
    <header>
        <nav class="navbar">
            <div class="logo">
                <img src="../images/logo.jpg" alt="Portal Logo">
                <span>Interview Prep</span>
            </div>
            <div class="nav-links">
                <a href="index.html" class="btn"><i class="fa-solid fa-home"></i> Home</a>
                <a href="register.html" class="btn"><i class="fa-solid fa-user-plus"></i> Register</a>
            </div>
        </nav>
    </header>
    <main class="auth-container">
        <h2>Forgot Password</h2>
        <p>Enter your username and answer the security question to reset your password.</p>

        <form id="forgotPasswordForm">
            <!-- Username Field -->
            <div class="input-group">
                <label for="username"><i class="fa-solid fa-user"></i> Username</label>
                <input type="text" id="username" name="username" placeholder="Enter your username" required>
            </div>

            <!-- Security Question -->
            <div class="input-group">
                <label for="security-question"><i class="fa-solid fa-question-circle"></i> Security Question</label>
                <input type="text" id="security-question" name="security-question" placeholder="Enter your security question" required>
            </div>

            <!-- Security Answer -->
            <div class="input-group">
                <label for="security-answer"><i class="fa-solid fa-key"></i> Answer</label>
                <input type="text" id="security-answer" name="security-answer" placeholder="Enter your answer" required>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn-primary">
                <i class="fa-solid fa-paper-plane"></i> Reset Password
            </button>

            <p><a href="studentLogin.html">Back to Login</a></p>
        </form>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2025 Interview Preparation Portal. All rights reserved.</p>
    </footer>

    <!-- JavaScript for Handling Forgot Password -->
    <script>
        document.getElementById("forgotPasswordForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const username = document.getElementById("username").value;
            const securityQuestion = document.getElementById("security-question").value;
            const securityAnswer = document.getElementById("security-answer").value;

            fetch("https://localhost:7121/api/auth/forgot-password", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username: username, securityQuestion: securityQuestion, securityAnswer: securityAnswer })
            })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                })
                .catch(error => {
                    console.error("Error:", error);
                });
        });
    </script>


</body>
</html>
